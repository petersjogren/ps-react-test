(this["webpackJsonpps-react-test"]=this["webpackJsonpps-react-test"]||[]).push([[0],{104:function(e,t,n){e.exports=n(196)},134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){},196:function(e,t,n){"use strict";n.r(t);var o=n(1),s=n.n(o),i=n(7),a=n.n(i),r=n(27),c=n(36),d=n(28),l=n(52);function p(e){return e?function(){var e=Object(l.a)(Array(202).keys()),t=e.map((function(t){return{nodeConfirmedInSessionWithID:0,title:"Add",id:1e3+t,position:{x:600+500*Math.cos(6.28/e.length*t),y:600+500*Math.sin(6.28/e.length*t)},width:120,isSelected:!1,inputPorts:[{name:"x",type:"int"},{name:"y",type:"int"}],outputPorts:[{name:"sum",type:"int"}]}})),n=e.filter((function(e){return e%2===0})).map((function(t){return{isSelected:!1,from:{nodeIndex:(t+e.length/2+2)%e.length,index:0},to:{nodeIndex:t,index:0}}}));return{currentSessionID:9999,pureHTMLgraph:!0,scale:.4,stressTest:!0,activeDrags:0,deltaPosition:{x:0,y:0},nodeTemplates:[{nodeConfirmedInSessionWithID:0,title:"Add",id:213,position:{x:186,y:7},isSelected:!1,width:120,inputPorts:[{name:"a",type:"int"},{name:"b",type:"int"}],outputPorts:[{name:"sum",type:"int"}]},{nodeConfirmedInSessionWithID:0,title:"Mult",id:213,position:{x:186,y:7},isSelected:!1,width:180,inputPorts:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"}],outputPorts:[{name:"sum",type:"int"}]},{nodeConfirmedInSessionWithID:0,title:"Sub",id:213,position:{x:186,y:7},isSelected:!1,width:100,inputPorts:[{name:"x",type:"int"},{name:"y",type:"int"}],outputPorts:[{name:"sum",type:"int"}]},{nodeConfirmedInSessionWithID:0,title:"Div",id:213,position:{x:186,y:7},isSelected:!1,width:120,inputPorts:[{name:"x",type:"int"},{name:"y",type:"int"}],outputPorts:[{name:"sum",type:"int"}]},{nodeConfirmedInSessionWithID:0,title:"Add/Sub 4",id:213,position:{x:186,y:7},isSelected:!1,width:120,inputPorts:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"w",type:"int"}],outputPorts:[{name:"sum",type:"int"},{name:"diff",type:"int"}]}],nodes:Object(l.a)(t),connections:Object(l.a)(n),textNode:{x:-500,y:-350,width:200,height:400,text:"Over hill, over dale, Thorough bush, thorough brier, Over park,\n            over pale, Thorough flood, thorough fire! I do wander everywhere,\n            Swifter than the moon's sphere; And I serve the Fairy Queen, To\n            dew her orbs upon the green; The cowslips tall her pensioners be;\n            In their gold coats spots you see; Those be rubies, fairy favours;\n            In those freckles live their savours; I must go seek some dewdrops\n            here, And hang a pearl in every cowslip's ear."},imgNode:{x:50,y:-350,width:400,height:300,url:"http://minerva-central.net/images/minerva-forward-m1.png"}}}():{currentSessionID:9999,pureHTMLgraph:!0,stressTest:!1,scale:.9,activeDrags:0,deltaPosition:{x:0,y:0},nodeTemplates:[{nodeConfirmedInSessionWithID:0,title:"Add",id:213,position:{x:186,y:7},isSelected:!1,width:120,inputPorts:[{name:"a",type:"int"},{name:"b",type:"int"}],outputPorts:[{name:"sum",type:"int"}]},{nodeConfirmedInSessionWithID:0,title:"Mult",id:213,position:{x:186,y:7},isSelected:!1,width:180,inputPorts:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"}],outputPorts:[{name:"sum",type:"int"}]},{nodeConfirmedInSessionWithID:0,title:"Sub",id:213,position:{x:186,y:7},isSelected:!1,width:100,inputPorts:[{name:"x",type:"int"},{name:"y",type:"int"}],outputPorts:[{name:"sum",type:"int"}]},{nodeConfirmedInSessionWithID:0,title:"Div",id:213,position:{x:186,y:7},isSelected:!1,width:120,inputPorts:[{name:"x",type:"int"},{name:"y",type:"int"}],outputPorts:[{name:"sum",type:"int"}]},{nodeConfirmedInSessionWithID:0,title:"Add/Sub 4",id:213,position:{x:186,y:7},isSelected:!1,width:120,inputPorts:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"w",type:"int"}],outputPorts:[{name:"sum",type:"int"},{name:"diff",type:"int"}]}],nodes:[{nodeConfirmedInSessionWithID:0,title:"Add",id:213,position:{x:186,y:7},isSelected:!1,width:120,inputPorts:[{name:"x",type:"int"},{name:"y",type:"int"}],outputPorts:[{name:"sum",type:"int"}]},{nodeConfirmedInSessionWithID:0,title:"Add",id:214,position:{x:421,y:123},isSelected:!1,width:120,inputPorts:[{name:"x",type:"int"},{name:"y",type:"int"}],outputPorts:[{name:"sum",type:"int"}]},{nodeConfirmedInSessionWithID:0,title:"Add",id:215,position:{x:85,y:200},isSelected:!1,width:80,inputPorts:[{name:"x",type:"int"},{name:"y",type:"int"}],outputPorts:[{name:"sum",type:"int"}]},{nodeConfirmedInSessionWithID:0,title:"Add",id:216,position:{x:86,y:106},isSelected:!1,width:140,inputPorts:[{name:"x",type:"int"},{name:"y",type:"int"}],outputPorts:[{name:"sum",type:"int"}]},{nodeConfirmedInSessionWithID:0,title:"Add",id:217,position:{x:421,y:7},isSelected:!1,width:140,inputPorts:[{name:"x",type:"int"},{name:"y",type:"int"}],outputPorts:[{name:"sum",type:"int"}]},{nodeConfirmedInSessionWithID:0,title:"Add",id:217,position:{x:421,y:250},isSelected:!1,width:140,inputPorts:[{name:"x",type:"int"},{name:"y",type:"int"}],outputPorts:[{name:"sum",type:"int"}]}],connections:[{isSelected:!1,from:{nodeIndex:0,index:0},to:{nodeIndex:1,index:0}},{isSelected:!1,from:{nodeIndex:3,index:0},to:{nodeIndex:1,index:0}}],textNode:{x:500,y:350,width:200,height:400,text:"Over hill, over dale, Thorough bush, thorough brier, Over park,\n            over pale, Thorough flood, thorough fire! I do wander everywhere,\n            Swifter than the moon's sphere; And I serve the Fairy Queen, To\n            dew her orbs upon the green; The cowslips tall her pensioners be;\n            In their gold coats spots you see; Those be rubies, fairy favours;\n            In those freckles live their savours; I must go seek some dewdrops\n            here, And hang a pearl in every cowslip's ear."},imgNode:{x:50,y:350,width:400,height:300,url:"http://minerva-central.net/images/minerva-forward-m1.png"}}}var u,m=n(8),h=n.n(m),f=n(71),y=n.n(f),g=n(72),x=n.n(g),v=n(97);function I(){return(I=Object(v.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.readyState===WebSocket.CLOSED){e.next=5;break}return n=new Promise((function(e,n){u.onmessage=function(t){console.log("got message",t),e(t)},u.send(t)})),e.abrupt("return",n);case 5:return e.abrupt("return","Error");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=n(98),b=n.n(S),E="CHANGE_ZOOM",w="POSITION_NODE",O="CREATE_NODE",C="POSITION_EVERY_OTHER_NODE",D="POSITION_TEXT_NODE",N="POSITION_IMG_NODE",T="TOGGLE_GRAPHICS",k="RESET_NORMAL",P="RESET_STRESS_TEST",j="CONNECT_PORTS",A="DELETE_SELECTED",_="SELECT_NODE",L="SELECT_CONNECTION",W="SELECT_CLEAR",$="SET_NODE_TEMPLATE_LIST",R="SET_CURRENT_SESSIONID",M="CONFIRM_NODE",B=function(e,t,n,o){return function(s){var i=b()();s({type:O,x:e,y:t,index:n,nodeId:i}),function(e){return I.apply(this,arguments)}("addnode;"+i+";"+o).then((function(e){console.log("answer",e);var t=JSON.parse(e.data);console.log("Response",t.type,t.nodeId,t.sessionId),s({type:M,nodeId:t.nodeId,sessionId:t.sessionId})}))}},F=function(e){return console.log("set sessionID action",e),{type:R,id:e}};function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(134);var z=n(10),J=n(11),U=n(13),X=n(12),V=n(14),Q=(n(135),n(136),function(e){function t(){return Object(z.a)(this,t),Object(U.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(J.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.templates.length!==e.templates.length}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{onClick:this.props.onLoadDefault},"Load default"),s.a.createElement("button",{onClick:this.props.onLoadOther},"Load many"),this.props.templates.map((function(e,t){return s.a.createElement("div",{key:t,className:"nodelistitem",draggable:!0,onDragStart:function(n){var o=JSON.stringify({type:"CREATE_NODE",templateIndex:t,title:e.title});console.log("drag start",o),n.dataTransfer.setData("text/plain",o)}},e.title.substring(0,20))})))}}]),t}(s.a.Component)),Y=function(e){function t(){return Object(z.a)(this,t),Object(U.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(J.a)(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.isSelected,o=t.connectionIndex,s=t.curveColor,i=t.curveWidth,a=t.start,r=t.end,c=t.c1,d=t.c2;return e.connectionIndex!==o||e.isSelected!==n||e.curveColor!==s||e.curveWidth!==i||e.start.x!==a.x||e.start.y!==a.y||e.end.x!==r.x||e.end.y!==r.y||e.c1.x!==c.x||e.c1.y!==c.y||e.c2.x!==d.x||e.c2.y!==d.y}},{key:"render",value:function(){var e=this.props,t=e.isSelected,n=e.connectionIndex,o=e.curveColor,i=e.curveWidth,a=e.start,r=e.end,c=e.c1,d=e.c2,l=e.onSelectConnection,p="M".concat(a.x,",").concat(a.y," C").concat(c.x,",").concat(c.y," ").concat(d.x,",").concat(d.y," ").concat(r.x,",").concat(r.y);return s.a.createElement("path",{onMouseDown:function(e){e.stopPropagation(),console.log("BezierCurve click"),l(n)},fill:"none",stroke:o,strokeDasharray:t?4:0,strokeWidth:i,d:p})}}]),t}(s.a.Component),Z=n(47),q=n.n(Z),K=function(e){return s.a.createElement(q.a,{key:e.key,scale:e.scale,position:e.position,onDrag:e.onDrag},s.a.createElement("div",{className:"box no-cursor"},s.a.createElement("svg",{className:"graphics inport"},s.a.createElement("circle",{className:"circle",xmlns:"http://www.w3.org/2000/svg",cx:"15",cy:"15",r:"15",style:{stroke:"#000000",strokeWidth:3,fill:"#66ff66"},opacity:".7"})),s.a.createElement("div",{className:"drag"},e.title),s.a.createElement("h3",null),s.a.createElement("svg",{className:"graphics outport",width:"30",height:"30"},s.a.createElement("circle",{className:"circle",xmlns:"http://www.w3.org/2000/svg",cx:"15",cy:"15",r:"15",style:{stroke:"#000000",strokeWidth:3,fill:"#ff0000"},opacity:".7"}))))},ee=(n(137),16),te=15;function ne(e){var t=e.name,n=e.nodeIndex,o=e.portIndex,i=e.onConnect;return s.a.createElement("div",{className:"port_area in"},s.a.createElement("div",{className:"port noselect",draggable:!0,onDrop:function(e){if(null!==e.dataTransfer){var t=e.dataTransfer.getData("text");if(null!==t&&""!==t){var s=JSON.parse(t);null!==s&&""!==s&&(console.log("payLoad",s),"CONNECT"===s.type?(console.log("connect node ".concat(s.nodeIndex,":").concat(s.outPortIndex," and node ").concat(n,":").concat(o)),i(s.nodeIndex,s.outPortIndex,n,o)):console.log("invalid drop"),e.preventDefault())}}},onDragOver:function(e){e.preventDefault()}},"\u2192"),s.a.createElement("header",{className:"porttext in noselect"},t),s.a.createElement("div",{className:"noport noselect"}))}var oe=function(){var e=new Image;return e.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",e}();function se(e){var t=e.name,n=e.nodeIndex,o=e.portIndex;return s.a.createElement("div",{className:"port_area out"},s.a.createElement("div",{className:"noport noselect"}),s.a.createElement("header",{className:"porttext out noselect"},t),s.a.createElement("div",{className:"port noselect",draggable:!0,onDragStart:function(e){var t=JSON.stringify({type:"CONNECT",nodeIndex:n,outPortIndex:o});console.log("drag start",t),e.dataTransfer.setData("text/plain",t),e.dataTransfer.setDragImage(oe,0,0),e.dataTransfer.dropEffect="none"},onDrag:function(e){console.log("onDrag")}},"\u2192"))}function ie(e,t){return{x:te/2,y:ee+ee*t+ee/2}}function ae(e,t){return{x:e.width-te/2,y:ee+e.inputPorts.length*ee+t*ee+ee/2}}var re=function(e){function t(){return Object(z.a)(this,t),Object(U.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(J.a)(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.nodeIndex,o=t.scale,s=t.position,i=t.width,a=t.isSelected,r=t.nodeConfirmedInSessionWithID;return e.nodeIndex!==n||e.scale!==o||e.nodeConfirmedInSessionWithID!==r||e.position.x!==s.x||e.position.y!==s.y||e.width!==i||e.isSelected!==a}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.nodeIndex,o=e.currentSessionID,i=e.nodeConfirmedInSessionWithID,a=e.scale,r=e.position,c=e.onConnect,d=e.onDrag,l=e.width,p=e.inputPorts,u=e.outputPorts,m=e.isSelected,h=e.onSelectNode,f=["node"];m&&f.push("nodeselected");var y=o===i;return console.log("currentSessionID",o,"nodeConfirmedInSessionWithID",i),y||f.push("notconfirmed"),s.a.createElement(q.a,{scale:a,position:r,onDrag:d,handle:"header",onMouseDown:function(e){e.stopPropagation(),console.log("node clicked"),h(n)}},s.a.createElement("div",{className:f.join(" "),style:{height:"".concat((p.length+u.length+1)*(ee-1),"px"),width:"".concat(l,"px")}},s.a.createElement("div",{className:"main_area"},s.a.createElement("div",{className:"addin noselect"},"+"),s.a.createElement("header",{className:"nodetext noselect"},t),s.a.createElement("div",{className:"addout noselect"},"+")),p.map((function(e,t){return s.a.createElement(ne,{key:t,name:e.name,nodeIndex:n,portIndex:t,onConnect:c})})),u.map((function(e,t){return s.a.createElement(se,{key:t,name:e.name,nodeIndex:n,portIndex:t})}))))}}]),t}(s.a.Component),ce=function(e){function t(){return Object(z.a)(this,t),Object(U.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(J.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"nodearea bgpattern",onMouseDown:function(t){console.log("graphicsarea clicked"),e.props.onSelectClear()},onDragOver:function(e){e.preventDefault()},onDrop:function(t){if(null!=t.dataTransfer){var n=t.dataTransfer.getData("text");if(console.log("textData",n),null!=n&&""!==n){var o=JSON.parse(n);if(console.log("dropped on nodearea",t,t.clientX,t.clientY),"CREATE_NODE"===o.type){var s=t.target.getBoundingClientRect(),i=(t.clientX-s.left)/e.props.scale,a=(t.clientY-s.top)/e.props.scale;e.props.onCreateNode(i,a,o.templateIndex,o.title)}}}}},s.a.createElement("div",{className:"graphicsarea",style:{transform:"scale("+this.props.scale+")"}},s.a.createElement("svg",{className:"arrowsvg",style:{position:"relative",top:"0px",left:"0px"}},this.props.connections.map((function(t,n){var o=e.props.nodes[t.from.nodeIndex],i=e.props.nodes[t.to.nodeIndex],a=o.position.x+ae(o,t.from.index).x,r=o.position.y+ae(o,t.from.index).y,c=i.position.x+ie(0,t.to.index).x,d=i.position.y+ie(0,t.to.index).y;return s.a.createElement(Y,{key:n,isSelected:t.isSelected,connectionIndex:n,onSelectConnection:e.props.onSelectConnection,start:{x:a,y:r},end:{x:c,y:d},c1:{x:a+3*o.width/4,y:r},c2:{x:c-3*i.width/4,y:d},curveColor:"black",curveWidth:3})}))),this.props.nodes.map((function(t,n){return t.htmlNode?s.a.createElement(K,{title:t.title,key:n,scale:e.props.scale,position:t.position,onDrag:function(t,o){e.props.onSetPosition(n,o,!1)}}):s.a.createElement(re,{title:t.title,key:n,nodeIndex:n,currentSessionID:e.props.currentSessionID,nodeConfirmedInSessionWithID:t.nodeConfirmedInSessionWithID,scale:e.props.scale,position:t.position,inputPorts:t.inputPorts,outputPorts:t.outputPorts,width:t.width,isSelected:t.isSelected,onDrag:function(t,o){e.props.onSetPosition(n,o,e.props.stressTest)},onConnect:e.props.onConnect,onSelectNode:e.props.onSelectNode})}))))}}]),t}(s.a.Component),de=Object(r.b)((function(e){return{nodes:e.nodes,connections:e.connections,scale:e.scale,currentSessionID:e.currentSessionID,textNode:e.textNode,imgNode:e.imgNode,stressTest:e.stressTest}}),(function(e){return{onSetPosition:function(t,n,o){e(o?function(e,t){return{type:C,index:e,position:t}}(t,n):function(e,t){return{type:w,index:e,position:t}}(t,n))},onSetTextNodePosition:function(t){return e(function(e){return{type:D,position:e}}(t))},onSetImgNodePosition:function(t){return e(function(e){return{type:N,position:e}}(t))},onConnect:function(t,n,o,s){console.log("onConnected"),e(function(e,t,n,o){return{type:j,fromNodeIndex:e,fromPortIndex:t,toNodeIndex:n,toPortIndex:o}}(t,n,o,s))},onSelectNode:function(t){return e(function(e){return{type:_,nodeIndex:e}}(t))},onSelectConnection:function(t){return e(function(e){return{type:L,connectionIndex:e}}(t))},onSelectClear:function(){return e({type:W})},onCreateNode:function(t,n,o,s){return e(B(t,n,o,s))}}}))(ce),le=n(46),pe=n(48),ue=n.n(pe);window.jQuery=window.$=ue.a,n(138);var me=n(139),he=function(e){function t(){return Object(z.a)(this,t),Object(U.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(J.a)(t,[{key:"componentDidMount",value:function(){this.renderCanvas("mycanvasdraw2d")}},{key:"renderCanvas",value:function(e){var t=new me.Canvas(e),n=new me.shape.node.Start,o=new me.shape.node.End;t.add(n,50,50),t.add(new me.shape.node.Start,50,250),t.add(o,230,150);var s=new me.Connection;s.setRouter(new me.layout.connection.SplineConnectionRouter),s.setSourceDecorator(new me.decoration.connection.BarDecorator),s.setTargetDecorator(new me.decoration.connection.DiamondDecorator),s.setSource(n.getOutputPort(0)),s.setTarget(o.getInputPort(0)),t.add(s);var i=new me.shape.analog.OpAmp;t.add(i,350,110);var a=new me.shape.basic.Polygon,r=new me.shape.basic.Polygon;t.add(a,450,150),t.add(r,450,200),r.setBackgroundColor("#f0f000"),r.setAlpha(.7),r.setDimension(100,60),t.setCurrentSelection(r);var c=new me.shape.basic.Text;c.setText("This is a simple text with some loooooong word in."),c.setBackgroundColor("#f0f000"),t.add(c,550,10);var d=new me.shape.basic.Label;d.setText("This is a label."),d.setBackgroundColor("#f0f000"),t.add(d,350,70);var l=new me.shape.diagram.Pie(80,80);l.setWidth(100),l.setData([30,60,122,4]),t.add(l,600,160);var p=new me.shape.note.PostIt;p.installEditor(new me.ui.LabelInplaceEditor),p.setColor("#000000"),p.setPadding(20),p.setText("This is simple sticky note\nDouble click to edit."),t.add(p,700,10);var u=new me.shape.basic.Label;u.installEditor(new me.ui.LabelInplaceEditor),u.setText("Double click me to edit"),t.add(u,50,10),me.Connection.createConnection=function(e,t){var n=new me.Connection;return n.setRouter(new me.layout.connection.FanConnectionRouter),n},n=new me.shape.node.Start,o=new me.shape.node.End,t.add(n,50,250),t.add(o,230,280),(s=me.Connection.createConnection()).setSource(n.getOutputPort(0)),s.setTarget(o.getInputPort(0)),t.add(s),(s=me.Connection.createConnection()).setSource(n.getOutputPort(0)),s.setTarget(o.getInputPort(0)),t.add(s),(s=me.Connection.createConnection()).setSource(n.getOutputPort(0)),s.setTarget(o.getInputPort(0)),t.add(s),(s=me.Connection.createConnection()).setSource(n.getOutputPort(0)),s.setTarget(o.getInputPort(0)),t.add(s),t.installEditPolicy(new me.policy.canvas.WheelZoomPolicy),c=new me.shape.basic.Text({text:"Use the mouse wheel + SHIFT to zoom"}),t.add(c,400,300),t.on("select",(function(e,t){null!==t.figure?console.log("figure selected"):console.log("selection cleared")})),ue()("#mycanvasdraw2d").click((function(e){console.log("Mouse click:"+e.clientX+","+e.clientY)})),(new me.io.json.Writer).marshal(t,(function(e){return console.log(e)}));var m=new(function(e){function t(e){var n;return Object(z.a)(this,t),(n=Object(U.a)(this,Object(X.a)(t).call(this,e))).index=0,n.svgs=[],n.svgs.push('<svg xmlns="http://www.w3.org/2000/svg">  <path stroke="#000" fill="#FFF" stroke-miterlimit="4" d="m0,49.842l0,-49.742l49.982,0l0,49.742l-49.982,0z" id="polygon3873"/>  <text text-anchor="middle" fill="#000000" font-family="Sans-serif" x="24.81563" y="26.50938" xml:space="preserve" font-size="8px" id="svg_1">Click me</text></svg>'),n.svgs.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1"><rect x="14" y="23" width="20" height="20" fill="lime" stroke="black" /></svg>'),n.on("click",(function(){this.index=++this.index%this.svgs.length,this.setSVG(this.svgs[this.index],500)}),Object(le.a)(n)),n}return Object(V.a)(t,e),Object(J.a)(t,[{key:"getSVG",value:function(){return this.svgs[0]}}]),t}(me.SVGFigure));t.add(m,100,100)}},{key:"render",value:function(){return s.a.createElement("div",{id:"mycanvasdraw2d"})}}]),t}(s.a.Component),fe=(s.a.Component,n(140),n(99)),ye=n(73),ge=n.n(ye),xe=(n(141),n(142),n(50)),ve=n(74),Ie=ve.a.Handle,Se=function(e){var t=e.value,n=e.dragging,o=e.index,i=Object(fe.a)(e,["value","dragging","index"]);return s.a.createElement(xe.a,{prefixCls:"rc-slider-tooltip",overlay:t,visible:n,placement:"top",key:o},s.a.createElement(Ie,Object.assign({value:t},i)))},be=Object(r.b)()((function(e){return e.showControls?s.a.createElement("div",{className:"topbar"},s.a.createElement("div",{className:"zoom"},s.a.createElement(ve.a,{min:20,max:150,value:e.scale,handle:Se,onChange:e.onChange})),s.a.createElement(ge.a,{label:"Save state to disk",className:"savestate",tagName:"h2",filename:"state.txt",exportFile:function(){return JSON.stringify(e.state,null,2)}},s.a.createElement("h1",null,"Save sta2te to disk"))):s.a.createElement("div",{className:"topbar"},s.a.createElement(ge.a,{label:"Save state to disk",className:"savestate",tagName:"h2",filename:"state.txt",exportFile:function(){return JSON.stringify(e.state,null,2)}},s.a.createElement("h1",null,"Save state to disk")))})),Ee=function(e){function t(){return Object(z.a)(this,t),Object(U.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(J.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.body.addEventListener("keydown",(function(t){console.log("key down ",t,e),"Backspace"!==t.key&&"Delete"!==t.key||e.props.deleteSelected()})),window.WebSocket=window.WebSocket||window.MozWebSocket,u=new WebSocket("ws://127.0.0.1:1337"),console.log("websocket connection",u),u.onopen=function(){},u.onclose=function(){console.log("Connection closed"),De.dispatch(F(""))},u.onerror=function(e){window.alert('Websocket test server not started: start with "node websocket-test-server.js"',e.type)},u.onmessage=function(e){console.log("sessionID: "+e.data),De.dispatch(F(e.data))}}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return s.a.createElement("div",{className:"App noselect"},s.a.createElement("div",{className:"buttonrow",style:{display:"flex",justifyContent:"space-around"}},s.a.createElement("button",{onClick:this.props.resetStateNormal},"Some nodes"),s.a.createElement("button",{onClick:this.props.resetStateStressTest},"Stress test"),s.a.createElement("button",{onClick:this.props.toggleGraphicsLibrary},"Pure HTML / Draw2D")),s.a.createElement(be,{className:"topbar",showControls:this.props.state.pureHTMLgraph,scale:100*this.props.state.scale,state:this.props.state,onChange:this.props.onZoomChange}),s.a.createElement("div",{className:"editor"},s.a.createElement("div",{className:"nodelist"},s.a.createElement(Q,{templates:this.props.state.nodeTemplates,onLoadDefault:this.props.onLoadDefault,onLoadOther:this.props.onLoadOther})),this.props.state.pureHTMLgraph?s.a.createElement(de,null):s.a.createElement(he,null)))}}]),t}(s.a.Component),we=Object(r.b)((function(e){return{state:e}}),(function(e){return{deleteSelected:function(){return e({type:A})},onZoomChange:function(t){return e({type:E,percent:t})},toggleGraphicsLibrary:function(){return e({type:T})},resetStateNormal:function(){return e({type:k})},resetStateStressTest:function(){return e({type:P})},onLoadDefault:function(){return e((function(e){console.log("loadDefaultNodeTemplatesAsyncAction"),y.a.get("templates/defaultNodes.json").then((function(t){console.log(t),e({type:$,data:t.data})}))}))},onLoadOther:function(){return e((function(e){console.log("loadOtherNodeTemplatesAsyncAction"),y.a.get("templates/otherNodes.json").then((function(t){console.log(t),e({type:$,data:t.data})}))}))}}}))(Ee);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Oe=n(103);n.d(t,"store",(function(){return De}));var Ce=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.c,De=Object(c.d)((function(){var e,t,n,o,s,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p(!1),a=arguments.length>1?arguments[1]:void 0;switch(a.type){case E:e=h()(i,{scale:{$set:a.percent/100}});break;case A:var r,c,l,u;for(console.log("DELETE_SELECTED"),e=i,l=!0;l;)for(l=!1,r=0;r<e.nodes.length;r++)if(e.nodes[r].isSelected){for(e=h()(e,{nodes:{$splice:[[r,1]]}}),u=!0;u;)for(u=!1,c=0;c<e.connections.length;c++)if(e.connections[c].from.nodeIndex===r||e.connections[c].to.nodeIndex===r){e=h()(e,{connections:{$splice:[[c,1]]}}),u=!0;break}o={},e.connections.map((function(e,t){return o[t]={to:{nodeIndex:{$set:e.to.nodeIndex>r?e.to.nodeIndex-1:e.to.nodeIndex}},from:{nodeIndex:{$set:e.from.nodeIndex>r?e.from.nodeIndex-1:e.from.nodeIndex}}},null})),e=h()(e,{connections:G({},o)}),l=!0;break}for(l=!0;l;)for(l=!1,r=0;r<e.connections.length;r++)if(e.connections[r].isSelected){e=h()(e,{connections:{$splice:[[r,1]]}}),l=!0;break}break;case _:console.log("SELECT_NODE",a.nodeIndex,i),e=h()(i,{nodes:Object(d.a)({},a.nodeIndex,{isSelected:{$set:!0}})});break;case O:console.log("CREATE_NODE",a.x,a.y,a),e=h()(i,{nodes:{$push:[i.nodeTemplates[a.index]]}}),e=h()(e,{nodes:Object(d.a)({},e.nodes.length-1,{position:{x:{$set:a.x-i.nodeTemplates[a.index].width/2},y:{$set:a.y-10}},id:{$set:a.nodeId}})}),console.log("state after ",e);break;case M:console.log("CONFIRM_NODE",a.nodeId,a.sessionId,a);var m=function(e,t){var n=-1;return e.nodes.forEach((function(e,o){e.id===t&&(n=o)})),n}(i,a.nodeId);console.log("nodeIndex",m),e=h()(i,{nodes:Object(d.a)({},m,{nodeConfirmedInSessionWithID:{$set:a.sessionId}})});break;case L:console.log("SELECT_CONNECTION",a.connectionIndex),e=h()(i,{connections:Object(d.a)({},a.connectionIndex,{isSelected:{$set:!0}})});break;case W:console.log("SELECT_CLEAR"),o={},i.nodes.map((function(e,t){return o[t]={isSelected:{$set:!1}},null})),e=h()(i,{nodes:G({},o)}),o={},i.connections.map((function(e,t){return o[t]={isSelected:{$set:!1}},null})),e=h()(e,{connections:G({},o)});break;case w:t=a.position.x-i.nodes[a.index].position.x,n=a.position.y-i.nodes[a.index].position.y,e=h()(i,{nodes:Object(d.a)({},a.index,{position:{x:{$set:a.position.x},y:{$set:a.position.y}}})});break;case C:t=a.position.x-i.nodes[a.index].position.x,n=a.position.y-i.nodes[a.index].position.y,o={},i.nodes.map((function(e,s){return s%2===0&&(o[s]={position:{x:{$set:i.nodes[s].position.x+t},y:{$set:i.nodes[s].position.y+n}}}),null})),e=h()(i,{nodes:G(Object(d.a)({},a.index,{position:{x:{$set:a.position.x},y:{$set:a.position.y}}}),o)});break;case D:e=h()(i,{textNode:{x:{$set:a.position.x},y:{$set:a.position.y}}});break;case N:e=h()(i,{imgNode:{x:{$set:a.position.x},y:{$set:a.position.y}}});break;case T:var f=!i.pureHTMLgraph;e=h()(i,{pureHTMLgraph:{$set:f}});break;case k:s=i.currentSessionID,e=p(!1),e=h()(e,{currentSessionID:{$set:s}});break;case P:s=i.currentSessionID,e=p(!0),e=h()(e,{currentSessionID:{$set:s}});break;case j:console.log("CONNECT_PORTS reducer"),e=h()(i,{connections:{$push:[{isSelected:!1,from:{nodeIndex:a.fromNodeIndex,index:a.fromPortIndex},to:{nodeIndex:a.toNodeIndex,index:a.toPortIndex}}]}});break;case $:console.log("SET_NODE_TEMPLATE_LIST"),e=h()(i,{nodeTemplates:{$set:a.data.nodeTemplates}});break;case R:console.log("SET_CURRENT_SESSIONID",a),e=h()(i,{currentSessionID:{$set:a.id}});break;default:console.log("default ",i),e=i}return e}),Ce(Object(c.a)(Oe.a)));a.a.render(s.a.createElement(r.a,{store:De},s.a.createElement(we,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[104,1,2]]]);
//# sourceMappingURL=main.1d0ce526.chunk.js.map