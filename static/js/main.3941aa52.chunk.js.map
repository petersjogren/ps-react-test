{"version":3,"sources":["InitialState.js","websocketClientUtils.js","redux/actions/index.js","components/NodeList.js","components/BezierCurve.js","components/HTMLNode.js","components/InOutNode.js","components/GraphicsAreaPureHTML.js","components/CanvasDraw2D.js","components/TopBar.js","App.js","serviceWorker.js","index.js","redux/reducers/index.js"],"names":["InitialState","stressTest","someIndexes","Array","keys","someNodes","map","index","nodeConfirmedInSessionWithID","title","id","uuidv4","position","x","Math","cos","length","y","sin","width","isSelected","inputPorts","name","type","outputPorts","someConnections","filter","a","from","nodeIndex","to","currentSessionID","pureHTMLgraph","scale","activeDrags","deltaPosition","nodeTemplates","nodes","connections","textNode","height","text","imgNode","url","InitialStateStressTest","connection","messageInProgress","messageQueue","successFunctionForMessageInProgress","websocketClientSetup","window","WebSocket","MozWebSocket","console","log","onopen","onclose","store","dispatch","storeCurrentSessionIDAction","onerror","error","alert","onmessage","message","data","nextCommand","shift","successFunction","send","string","websocketSendCommand","readyState","CLOSED","push","CHANGE_ZOOM","POSITION_NODE","CREATE_NODE","POSITION_EVERY_OTHER_NODE","POSITION_TEXT_NODE","POSITION_IMG_NODE","TOGGLE_GRAPHICS","RESET_NORMAL","RESET_STRESS_TEST","CONNECT_PORTS","DELETE_SELECTED","SELECT_NODE","SELECT_CONNECTION","SELECT_CLEAR","SET_NODE_TEMPLATE_LIST","SET_CURRENT_SESSIONID","CONFIRM_NODE","RECONNECT_SERVER","sessionID","NodeList","newProps","newState","this","props","templates","Fragment","onClick","onLoadDefault","onLoadOther","value","key","className","draggable","onDragStart","e","payLoadString","JSON","stringify","templateIndex","dataTransfer","setData","substring","React","Component","BezierCurve","nextProps","connectionIndex","curveColor","curveWidth","start","end","c1","c2","onSelectConnection","curve","onMouseDown","stopPropagation","fill","stroke","strokeDasharray","strokeWidth","d","onDrag","xmlns","cx","cy","r","style","opacity","rowHeight","portWidth","InPort","portIndex","onConnect","onDrop","textData","getData","payLoad","parse","outPortIndex","preventDefault","onDragOver","invisibleDragImage","img","Image","src","OutPort","setDragImage","dropEffect","inPortRelativePosition","node","inPortIndex","outPortRelativePosition","InOutNode","onSelectNode","classes","isConfirmedInThisSession","handle","join","port","GraphicsAreaPureHTML","onSelectClear","clientX","clientY","rect","target","getBoundingClientRect","left","top","onCreateNode","transform","fromNode","toNode","fromX","fromY","toX","toY","htmlNode","HTMLNode","onSetPosition","connect","state","positionEveryOtherNodeAction","positionNodeAction","onSetTextNodePosition","positionTextNodeAction","onSetImgNodePosition","positionImgNodeAction","fromNodeIndex","fromPortIndex","toNodeIndex","toPortIndex","connectPortsAction","selectNodeAction","selectConnectionAction","nodeId","json","sessionId","createNodeAction","jQuery","$","require","draw2d","CanvasDraw2D","renderCanvas","canvasId","canvas","Canvas","shape","Start","End","add","c","Connection","setRouter","layout","SplineConnectionRouter","setSourceDecorator","decoration","BarDecorator","setTargetDecorator","DiamondDecorator","setSource","getOutputPort","setTarget","getInputPort","figure","analog","OpAmp","p1","basic","Polygon","p2","setBackgroundColor","setAlpha","setDimension","setCurrentSelection","Text","setText","lshape","Label","pie","diagram","Pie","setWidth","postit","note","PostIt","installEditor","ui","LabelInplaceEditor","setColor","setPadding","label","createConnection","sourcePort","targetPort","con","FanConnectionRouter","installEditPolicy","policy","WheelZoomPolicy","on","emitter","event","click","ev","io","Writer","marshal","fig","attr","svgs","setSVG","SVGFigure","Handle","Slider","dragging","restProps","prefixCls","overlay","visible","placement","showControls","min","max","onChange","tagName","filename","exportFile","App","document","body","addEventListener","deleteSelected","display","justifyContent","reconnect","sync","resetStateNormal","resetStateStressTest","toggleGraphicsLibrary","onZoomChange","percent","axios","get","then","response","currentSessionId","forEach","syncAction","Boolean","location","hostname","match","composeEnhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","deltaX","deltaY","updateObject","oldSessionId","action","update","$set","i","connIdx","wasSomethingDeleted","wasConnectionDeleted","$splice","$push","foundIndex","findNodeIndexWithId","newValue","applyMiddleware","thunk","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.3941aa52.chunk.js","sourcesContent":["import uuidv4 from \"uuid/v4\";\n\nfunction nodeTemplates() {\n  return [\n    {\n      nodeConfirmedInSessionWithID: 0,\n      title: \"Add\",\n      id: 213,\n      position: {\n        x: 186,\n        y: 7\n      },\n      isSelected: false,\n      width: 120,\n      inputPorts: [\n        { name: \"a\", type: \"int\" },\n        { name: \"b\", type: \"int\" }\n      ],\n      outputPorts: [{ name: \"sum\", type: \"int\" }]\n    },\n    {\n      nodeConfirmedInSessionWithID: 0,\n      title: \"Mult\",\n      id: 213,\n      position: {\n        x: 186,\n        y: 7\n      },\n      isSelected: false,\n      width: 180,\n      inputPorts: [\n        { name: \"x\", type: \"int\" },\n        { name: \"y\", type: \"int\" },\n        { name: \"z\", type: \"int\" }\n      ],\n      outputPorts: [{ name: \"sum\", type: \"int\" }]\n    },\n    {\n      nodeConfirmedInSessionWithID: 0,\n      title: \"Sub\",\n      id: 213,\n      position: {\n        x: 186,\n        y: 7\n      },\n      isSelected: false,\n      width: 100,\n      inputPorts: [\n        { name: \"x\", type: \"int\" },\n        { name: \"y\", type: \"int\" }\n      ],\n      outputPorts: [{ name: \"sum\", type: \"int\" }]\n    },\n    {\n      nodeConfirmedInSessionWithID: 0,\n      title: \"Div\",\n      id: 213,\n      position: {\n        x: 186,\n        y: 7\n      },\n      isSelected: false,\n      width: 120,\n      inputPorts: [\n        { name: \"x\", type: \"int\" },\n        { name: \"y\", type: \"int\" }\n      ],\n      outputPorts: [{ name: \"sum\", type: \"int\" }]\n    },\n    {\n      nodeConfirmedInSessionWithID: 0,\n      title: \"Add/Sub 4\",\n      id: 213,\n      position: {\n        x: 186,\n        y: 7\n      },\n      isSelected: false,\n      width: 120,\n      inputPorts: [\n        { name: \"x\", type: \"int\" },\n        { name: \"y\", type: \"int\" },\n        { name: \"z\", type: \"int\" },\n        { name: \"w\", type: \"int\" }\n      ],\n      outputPorts: [\n        { name: \"sum\", type: \"int\" },\n        { name: \"diff\", type: \"int\" }\n      ]\n    }\n  ];\n}\n\nfunction InitialStateStressTest() {\n  var someIndexes = [...Array(202).keys()];\n  var someNodes = someIndexes.map(index => {\n    return {\n      nodeConfirmedInSessionWithID: 0,\n      title: \"Add\",\n      id: uuidv4(),\n      position: {\n        x: 600 + 500 * Math.cos(((2 * 3.14) / someIndexes.length) * index),\n        y: 600 + 500 * Math.sin(((2 * 3.14) / someIndexes.length) * index)\n      },\n      width: 120,\n      isSelected: false,\n      inputPorts: [\n        { name: \"x\", type: \"int\" },\n        { name: \"y\", type: \"int\" }\n      ],\n      outputPorts: [{ name: \"sum\", type: \"int\" }]\n    };\n  });\n\n  var someConnections = someIndexes\n    .filter(a => a % 2 === 0)\n    .map(index => {\n      return {\n        isSelected: false,\n        from: {\n          nodeIndex: (index + someIndexes.length / 2 + 2) % someIndexes.length,\n          index: 0\n        },\n        to: {\n          nodeIndex: index,\n          index: 0\n        }\n      };\n    });\n\n  return {\n    currentSessionID: 9999,\n    pureHTMLgraph: true,\n    scale: 0.4,\n    stressTest: true,\n    activeDrags: 0,\n    deltaPosition: {\n      x: 0,\n      y: 0\n    },\n    nodeTemplates: nodeTemplates(),\n    nodes: [...someNodes],\n    connections: [...someConnections],\n    textNode: {\n      x: -500,\n      y: -350,\n      width: 200,\n      height: 400,\n      text: `Over hill, over dale, Thorough bush, thorough brier, Over park,\n            over pale, Thorough flood, thorough fire! I do wander everywhere,\n            Swifter than the moon's sphere; And I serve the Fairy Queen, To\n            dew her orbs upon the green; The cowslips tall her pensioners be;\n            In their gold coats spots you see; Those be rubies, fairy favours;\n            In those freckles live their savours; I must go seek some dewdrops\n            here, And hang a pearl in every cowslip's ear.`\n    },\n    imgNode: {\n      x: 50,\n      y: -350,\n      width: 400,\n      height: 300,\n      url: \"http://minerva-central.net/images/minerva-forward-m1.png\"\n    }\n  };\n}\n\nfunction InitialStateNormal() {\n  return {\n    currentSessionID: 9999,\n    pureHTMLgraph: true,\n    stressTest: false,\n    scale: 0.9,\n    activeDrags: 0,\n    deltaPosition: {\n      x: 0,\n      y: 0\n    },\n    nodeTemplates: nodeTemplates(),\n    nodes: [\n      {\n        nodeConfirmedInSessionWithID: \"c5e9a331-66b4-4461-8f3f-d319fa838195\",\n        title: \"Add\",\n        id: \"0523c8bf-d17e-49a5-918b-a91bca1b4ee9\",\n        position: {\n          x: 84.44444444444466,\n          y: 28.888888888889323\n        },\n        isSelected: false,\n        width: 120,\n        inputPorts: [\n          {\n            name: \"a\",\n            type: \"int\"\n          },\n          {\n            name: \"b\",\n            type: \"int\"\n          }\n        ],\n        outputPorts: [\n          {\n            name: \"sum\",\n            type: \"int\"\n          }\n        ]\n      },\n      {\n        nodeConfirmedInSessionWithID: \"c5e9a331-66b4-4461-8f3f-d319fa838195\",\n        title: \"Add\",\n        id: \"02bf0700-c984-452e-b3c2-82de39114955\",\n        position: {\n          x: 507.7777777777772,\n          y: 231.1111111111114\n        },\n        isSelected: false,\n        width: 120,\n        inputPorts: [\n          {\n            name: \"a\",\n            type: \"int\"\n          },\n          {\n            name: \"b\",\n            type: \"int\"\n          }\n        ],\n        outputPorts: [\n          {\n            name: \"sum\",\n            type: \"int\"\n          }\n        ]\n      },\n      {\n        nodeConfirmedInSessionWithID: \"c5e9a331-66b4-4461-8f3f-d319fa838195\",\n        title: \"Sub\",\n        id: \"44eeef82-abfe-4070-9f72-e854dd325991\",\n        position: {\n          x: 80.00000000000003,\n          y: 165.55555555555566\n        },\n        isSelected: false,\n        width: 100,\n        inputPorts: [\n          {\n            name: \"x\",\n            type: \"int\"\n          },\n          {\n            name: \"y\",\n            type: \"int\"\n          }\n        ],\n        outputPorts: [\n          {\n            name: \"sum\",\n            type: \"int\"\n          }\n        ]\n      },\n      {\n        nodeConfirmedInSessionWithID: \"c5e9a331-66b4-4461-8f3f-d319fa838195\",\n        title: \"Add/Sub 4\",\n        id: \"3c753071-65f6-4fbe-9bf1-2d861c6186ca\",\n        position: {\n          x: 293.33333333333286,\n          y: 231.11111111111128\n        },\n        isSelected: false,\n        width: 120,\n        inputPorts: [\n          {\n            name: \"x\",\n            type: \"int\"\n          },\n          {\n            name: \"y\",\n            type: \"int\"\n          },\n          {\n            name: \"z\",\n            type: \"int\"\n          },\n          {\n            name: \"w\",\n            type: \"int\"\n          }\n        ],\n        outputPorts: [\n          {\n            name: \"sum\",\n            type: \"int\"\n          },\n          {\n            name: \"diff\",\n            type: \"int\"\n          }\n        ]\n      },\n      {\n        nodeConfirmedInSessionWithID: \"c5e9a331-66b4-4461-8f3f-d319fa838195\",\n        title: \"Mult\",\n        id: \"0da44ac8-acab-47cd-b195-29e11008c869\",\n        position: {\n          x: 435.5555555555551,\n          y: 73.33333333333347\n        },\n        isSelected: false,\n        width: 180,\n        inputPorts: [\n          {\n            name: \"x\",\n            type: \"int\"\n          },\n          {\n            name: \"y\",\n            type: \"int\"\n          },\n          {\n            name: \"z\",\n            type: \"int\"\n          }\n        ],\n        outputPorts: [\n          {\n            name: \"sum\",\n            type: \"int\"\n          }\n        ]\n      }\n    ],\n    connections: [\n      {\n        isSelected: false,\n        from: {\n          nodeIndex: 3,\n          index: 0\n        },\n        to: {\n          nodeIndex: 1,\n          index: 0\n        }\n      },\n      {\n        isSelected: false,\n        from: {\n          nodeIndex: 2,\n          index: 0\n        },\n        to: {\n          nodeIndex: 3,\n          index: 1\n        }\n      },\n      {\n        isSelected: false,\n        from: {\n          nodeIndex: 0,\n          index: 0\n        },\n        to: {\n          nodeIndex: 4,\n          index: 1\n        }\n      },\n      {\n        isSelected: false,\n        from: {\n          nodeIndex: 2,\n          index: 0\n        },\n        to: {\n          nodeIndex: 4,\n          index: 2\n        }\n      }\n    ],\n    textNode: {\n      x: 500,\n      y: 350,\n      width: 200,\n      height: 400,\n      text: `Over hill, over dale, Thorough bush, thorough brier, Over park,\n            over pale, Thorough flood, thorough fire! I do wander everywhere,\n            Swifter than the moon's sphere; And I serve the Fairy Queen, To\n            dew her orbs upon the green; The cowslips tall her pensioners be;\n            In their gold coats spots you see; Those be rubies, fairy favours;\n            In those freckles live their savours; I must go seek some dewdrops\n            here, And hang a pearl in every cowslip's ear.`\n    },\n    imgNode: {\n      x: 50,\n      y: 350,\n      width: 400,\n      height: 300,\n      url: \"http://minerva-central.net/images/minerva-forward-m1.png\"\n    }\n  };\n}\n\nexport default function InitialState(stressTest) {\n  if (stressTest) {\n    return InitialStateStressTest();\n  } else {\n    return InitialStateNormal();\n  }\n}\n","import { store } from \"./index.js\";\nimport { storeCurrentSessionIDAction } from \"./redux/actions\";\n\nvar connection;\nvar messageInProgress = false;\nvar messageQueue = [];\nvar successFunctionForMessageInProgress = null;\n\nexport function websocketClientSetup() {\n  // if user is running mozilla then use it's built-in WebSocket\n  window.WebSocket = window.WebSocket || window.MozWebSocket;\n\n  connection = new WebSocket(\"ws://127.0.0.1:1337\");\n  console.log(\"websocket connection\", connection);\n\n  connection.onopen = function() {\n    // connection is opened and ready to use\n  };\n\n  connection.onclose = function() {\n    console.log(\"Connection closed\");\n    store.dispatch(storeCurrentSessionIDAction(\"\"));\n  };\n\n  connection.onerror = function(error) {\n    // an error occurred when sending/receiving data\n    window.alert(\n      'Websocket test server not started: start with \"node websocket-test-server.js\"',\n      error.type\n    );\n  };\n\n  connection.onmessage = function(message) {\n    console.log(\"sessionID: \" + message.data);\n    store.dispatch(storeCurrentSessionIDAction(message.data));\n\n    // Reset onmessage handler to handle response messages\n    connection.onmessage = function(message) {\n      if (messageInProgress) {\n        successFunctionForMessageInProgress(message);\n        if (messageQueue.length > 0) {\n          var nextCommand = messageQueue[0];\n          messageQueue.shift();\n          successFunctionForMessageInProgress = nextCommand.successFunction;\n          connection.send(nextCommand.string);\n        } else {\n          messageInProgress = false;\n        }\n      }\n    };\n  };\n}\n\nexport function websocketSendCommand(string, successFunction) {\n  if (connection.readyState !== WebSocket.CLOSED) {\n    if (messageInProgress) {\n      messageQueue.push({\n        string,\n        successFunction\n      });\n    } else {\n      successFunctionForMessageInProgress = successFunction;\n      connection.send(string);\n      messageInProgress = true;\n    }\n  } else {\n    return \"Error\";\n  }\n}\n","import axios from \"axios\";\nimport {\n  websocketSendCommand,\n  websocketClientSetup\n} from \"../../websocketClientUtils\";\nimport uuidv4 from \"uuid/v4\";\n\nexport const CHANGE_ZOOM = \"CHANGE_ZOOM\";\nexport const POSITION_NODE = \"POSITION_NODE\";\nexport const CREATE_NODE = \"CREATE_NODE\";\nexport const POSITION_EVERY_OTHER_NODE = \"POSITION_EVERY_OTHER_NODE\";\nexport const POSITION_TEXT_NODE = \"POSITION_TEXT_NODE\";\nexport const POSITION_IMG_NODE = \"POSITION_IMG_NODE\";\nexport const TOGGLE_GRAPHICS = \"TOGGLE_GRAPHICS\";\nexport const RESET_NORMAL = \"RESET_NORMAL\";\nexport const RESET_STRESS_TEST = \"RESET_STRESS_TEST\";\nexport const CONNECT_PORTS = \"CONNECT_PORTS\";\nexport const DELETE_SELECTED = \"DELETE_SELECTED\";\nexport const SELECT_NODE = \"SELECT_NODE\";\nexport const SELECT_CONNECTION = \"SELECT_CONNECTION\";\nexport const SELECT_CLEAR = \"SELECT_CLEAR\";\nexport const SET_NODE_TEMPLATE_LIST = \"SET_NODE_TEMPLATE_LIST\";\nexport const SET_CURRENT_SESSIONID = \"SET_CURRENT_SESSIONID\";\nexport const CONFIRM_NODE = \"CONFIRM_NODE\";\nexport const RECONNECT_SERVER = \"RECONNECT_SERVER\";\n\nexport const zoomAction = percent => ({\n  type: CHANGE_ZOOM,\n  percent\n});\n\nexport const deleteSelectedAction = () => ({\n  type: DELETE_SELECTED\n});\n\nexport const createNodeAction = (x, y, index, title) => dispatch => {\n  var nodeId = uuidv4();\n  dispatch({\n    type: CREATE_NODE,\n    x,\n    y,\n    index,\n    nodeId\n  });\n  websocketSendCommand(\"addnode;\" + nodeId + \";\" + title, value => {\n    console.log(\"answer\", value);\n    var json = JSON.parse(value.data);\n    console.log(\"Response\", json.type, json.nodeId, json.sessionId);\n    dispatch({\n      type: CONFIRM_NODE,\n      nodeId: json.nodeId,\n      sessionId: json.sessionId\n    });\n  });\n};\n\nexport const selectNodeAction = nodeIndex => ({\n  type: SELECT_NODE,\n  nodeIndex\n});\n\nexport const selectClearAction = () => ({\n  type: SELECT_CLEAR\n});\n\nexport const selectConnectionAction = connectionIndex => ({\n  type: SELECT_CONNECTION,\n  connectionIndex\n});\n\nexport const positionNodeAction = (index, position) => ({\n  type: POSITION_NODE,\n  index,\n  position\n});\n\nexport const positionEveryOtherNodeAction = (index, position) => ({\n  type: POSITION_EVERY_OTHER_NODE,\n  index,\n  position\n});\n\nexport const positionTextNodeAction = position => ({\n  type: POSITION_TEXT_NODE,\n  position\n});\n\nexport const positionImgNodeAction = position => ({\n  type: POSITION_IMG_NODE,\n  position\n});\n\nexport const toggleGraphicsLibraryAction = () => ({\n  type: TOGGLE_GRAPHICS\n});\n\nexport const resetStateNormalAction = () => ({\n  type: RESET_NORMAL\n});\n\nexport const resetStateStressTestAction = () => ({\n  type: RESET_STRESS_TEST\n});\n\nexport const connectPortsAction = (\n  fromNodeIndex,\n  fromPortIndex,\n  toNodeIndex,\n  toPortIndex\n) => ({\n  type: CONNECT_PORTS,\n  fromNodeIndex,\n  fromPortIndex,\n  toNodeIndex,\n  toPortIndex\n});\n\nexport const loadDefaultNodeTemplatesAsyncAction = () => dispatch => {\n  console.log(\"loadDefaultNodeTemplatesAsyncAction\");\n  axios.get(\"templates/defaultNodes.json\").then(response => {\n    console.log(response);\n    dispatch({\n      type: SET_NODE_TEMPLATE_LIST,\n      data: response.data\n    });\n  });\n};\n\nexport const loadOtherNodeTemplatesAsyncAction = () => dispatch => {\n  console.log(\"loadOtherNodeTemplatesAsyncAction\");\n  axios.get(\"templates/otherNodes.json\").then(response => {\n    console.log(response);\n    dispatch({\n      type: SET_NODE_TEMPLATE_LIST,\n      data: response.data\n    });\n  });\n};\n\nexport const storeCurrentSessionIDAction = sessionID => {\n  console.log(\"set sessionID action\", sessionID);\n  return {\n    type: SET_CURRENT_SESSIONID,\n    id: sessionID\n  };\n};\n\nexport const reconnectAction = () => {\n  console.log(\"reconnectAction\");\n  websocketClientSetup();\n  return {\n    type: RECONNECT_SERVER\n  };\n};\n\n// Add unconfirmed nodes to server\nexport const syncAction = (currentSessionId, nodes) => dispatch => {\n  // Filter out the nodes that are not confirmed in the current session adn add them to server\n  var missingNodes = nodes.filter(node => {\n    return node.nodeConfirmedInSessionWithID !== currentSessionId;\n  });\n  missingNodes.forEach(node => {\n    websocketSendCommand(\"addnode;\" + node.id + \";\" + node.title, value => {\n      console.log(\"answer\", value);\n      var json = JSON.parse(value.data);\n      console.log(\"Response\", json.type, json.nodeId, json.sessionId);\n      dispatch({\n        type: CONFIRM_NODE,\n        nodeId: json.nodeId,\n        sessionId: json.sessionId\n      });\n    });\n  });\n};\n","import React from \"react\";\n\nexport class NodeList extends React.Component {\n  shouldComponentUpdate(newProps, newState) {\n    if (this.props.templates.length !== newProps.templates.length) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <button onClick={this.props.onLoadDefault}>Load default</button>\n        <button onClick={this.props.onLoadOther}>Load many</button>\n        {this.props.templates.map((value, index) => {\n          return (\n            <div\n              key={index}\n              className=\"nodelistitem\"\n              draggable\n              onDragStart={e => {\n                //console.log(e.nativeEvent.offsetX, e.nativeEvent.offsetY);\n\n                var payLoadString = JSON.stringify({\n                  type: \"CREATE_NODE\",\n                  templateIndex: index,\n                  title: value.title\n                });\n                console.log(\"drag start\", payLoadString);\n                e.dataTransfer.setData(\"text/plain\", payLoadString);\n              }}\n            >\n              {value.title.substring(0, 20)}\n            </div>\n          );\n        })}\n      </React.Fragment>\n    );\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport default class BezierCurve extends React.Component {\n  shouldComponentUpdate(nextProps) {\n    const {\n      isSelected,\n      connectionIndex,\n      curveColor,\n      curveWidth,\n      start,\n      end,\n      c1,\n      c2\n    } = this.props;\n    return (\n      nextProps.connectionIndex !== connectionIndex ||\n      nextProps.isSelected !== isSelected ||\n      nextProps.curveColor !== curveColor ||\n      nextProps.curveWidth !== curveWidth ||\n      nextProps.start.x !== start.x ||\n      nextProps.start.y !== start.y ||\n      nextProps.end.x !== end.x ||\n      nextProps.end.y !== end.y ||\n      nextProps.c1.x !== c1.x ||\n      nextProps.c1.y !== c1.y ||\n      nextProps.c2.x !== c2.x ||\n      nextProps.c2.y !== c2.y\n    );\n  }\n\n  render() {\n    const {\n      isSelected,\n      connectionIndex,\n      curveColor,\n      curveWidth,\n      start,\n      end,\n      c1,\n      c2,\n      onSelectConnection\n    } = this.props;\n    const curve = `M${start.x},${start.y} C${c1.x},${c1.y} ${c2.x},${c2.y} ${end.x},${end.y}`;\n\n    return (\n      <path\n        onMouseDown={e => {\n          e.stopPropagation();\n          console.log(\"BezierCurve click\");\n          onSelectConnection(connectionIndex);\n        }}\n        fill=\"none\"\n        stroke={curveColor}\n        strokeDasharray={isSelected ? 4 : 0}\n        strokeWidth={curveWidth}\n        d={curve}\n      />\n    );\n  }\n}\n\nBezierCurve.propTypes = {\n  connectionIndex: PropTypes.number.isRequired,\n  curveColor: PropTypes.string.isRequired,\n  curveWidth: PropTypes.number.isRequired,\n  onSelectConnection: PropTypes.func.isRequired,\n  isSelected: PropTypes.bool.isRequired,\n  start: PropTypes.exact({\n    x: PropTypes.number.isRequired,\n    y: PropTypes.number.isRequired\n  }).isRequired,\n  end: PropTypes.exact({\n    x: PropTypes.number.isRequired,\n    y: PropTypes.number.isRequired\n  }).isRequired,\n  c1: PropTypes.exact({\n    x: PropTypes.number.isRequired,\n    y: PropTypes.number.isRequired\n  }).isRequired,\n  c2: PropTypes.exact({\n    x: PropTypes.number.isRequired,\n    y: PropTypes.number.isRequired\n  }).isRequired\n};\n","import React from \"react\";\nimport Draggable from \"react-draggable\";\n\nexport default function(props) {\n  return (\n    <Draggable\n      key={props.key}\n      scale={props.scale}\n      position={props.position}\n      onDrag={props.onDrag}\n    >\n      <div className=\"box no-cursor\">\n        <svg className=\"graphics inport\">\n          <circle\n            className=\"circle\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            cx=\"15\"\n            cy=\"15\"\n            r=\"15\"\n            style={{\n              stroke: \"#000000\",\n              strokeWidth: 3,\n              fill: \"#66ff66\"\n            }}\n            opacity=\".7\"\n          />\n        </svg>\n\n        <div className=\"drag\">{props.title}</div>\n        <h3>{/* <InlineMath>\\int_0^\\infty x^2 dx</InlineMath> */}</h3>\n\n        <svg className=\"graphics outport\" width=\"30\" height=\"30\">\n          <circle\n            className=\"circle\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            cx=\"15\"\n            cy=\"15\"\n            r=\"15\"\n            style={{\n              stroke: \"#000000\",\n              strokeWidth: 3,\n              fill: \"#ff0000\"\n            }}\n            opacity=\".7\"\n          />\n        </svg>\n      </div>\n    </Draggable>\n  );\n}\n","import React from \"react\";\nimport Draggable from \"react-draggable\";\nimport \"./InOutNode.css\";\n\nvar rowHeight = 16;\nvar portWidth = 15;\n\nfunction InPort(props) {\n  const { name, nodeIndex, portIndex, onConnect } = props;\n  return (\n    <div className=\"port_area in\">\n      <div\n        className=\"port noselect\"\n        draggable={true}\n        onDrop={e => {\n          if (e.dataTransfer !== null) {\n            var textData = e.dataTransfer.getData(\"text\");\n            if (textData !== null && textData !== \"\") {\n              var payLoad = JSON.parse(textData);\n              if (payLoad !== null && payLoad !== \"\") {\n                console.log(\"payLoad\", payLoad);\n                if (payLoad.type === \"CONNECT\") {\n                  console.log(\n                    `connect node ${payLoad.nodeIndex}:${payLoad.outPortIndex} and node ${nodeIndex}:${portIndex}`\n                  );\n                  onConnect(\n                    payLoad.nodeIndex,\n                    payLoad.outPortIndex,\n                    nodeIndex,\n                    portIndex\n                  );\n                } else {\n                  console.log(\"invalid drop\");\n                }\n                e.preventDefault();\n              }\n            }\n          }\n        }}\n        onDragOver={e => {\n          e.preventDefault();\n        }}\n      >\n        →\n      </div>\n      <header className=\"porttext in noselect\">{name}</header>\n      <div className=\"noport noselect\"></div>\n    </div>\n  );\n}\n\nconst invisibleDragImage = (() => {\n  var img = new Image();\n  img.src =\n    \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\n  return img;\n})();\n\nfunction OutPort(props) {\n  const { name, nodeIndex, portIndex } = props;\n  return (\n    <div className=\"port_area out\">\n      <div className=\"noport noselect\"></div>\n      <header className=\"porttext out noselect\">{name}</header>\n      <div\n        className=\"port noselect\"\n        draggable={true}\n        onDragStart={e => {\n          //console.log(e.nativeEvent.offsetX, e.nativeEvent.offsetY);\n\n          var payLoadString = JSON.stringify({\n            type: \"CONNECT\",\n            nodeIndex: nodeIndex,\n            outPortIndex: portIndex\n          });\n          console.log(\"drag start\", payLoadString);\n          e.dataTransfer.setData(\"text/plain\", payLoadString);\n          e.dataTransfer.setDragImage(invisibleDragImage, 0, 0);\n          e.dataTransfer.dropEffect = \"none\";\n        }}\n        onDrag={e => {\n          console.log(\"onDrag\");\n        }}\n      >\n        →\n      </div>\n    </div>\n  );\n}\n\nexport function inPortRelativePosition(node, inPortIndex) {\n  return {\n    x: portWidth / 2,\n    y: rowHeight + rowHeight * inPortIndex + rowHeight / 2\n  };\n}\n\nexport function outPortRelativePosition(node, outPortIndex) {\n  return {\n    x: node.width - portWidth / 2,\n    y:\n      rowHeight +\n      node.inputPorts.length * rowHeight +\n      outPortIndex * rowHeight +\n      rowHeight / 2\n  };\n}\n\nexport class InOutNode extends React.Component {\n  shouldComponentUpdate(nextProps) {\n    const {\n      nodeIndex,\n      scale,\n      position,\n      width,\n      isSelected,\n      currentSessionID,\n      nodeConfirmedInSessionWithID\n    } = this.props;\n    return (\n      nextProps.nodeIndex !== nodeIndex ||\n      nextProps.currentSessionID !== currentSessionID ||\n      nextProps.scale !== scale ||\n      nextProps.nodeConfirmedInSessionWithID !== nodeConfirmedInSessionWithID ||\n      nextProps.position.x !== position.x ||\n      nextProps.position.y !== position.y ||\n      nextProps.width !== width ||\n      nextProps.isSelected !== isSelected\n    );\n  }\n\n  render() {\n    const {\n      title,\n      nodeIndex,\n      currentSessionID,\n      nodeConfirmedInSessionWithID,\n      scale,\n      position,\n      onConnect,\n      onDrag,\n      width,\n      inputPorts,\n      outputPorts,\n      isSelected,\n      onSelectNode\n    } = this.props;\n    var classes = [\"node\"];\n    if (isSelected) {\n      classes.push(\"nodeselected\");\n    }\n    var isConfirmedInThisSession =\n      currentSessionID === nodeConfirmedInSessionWithID;\n    console.log(\n      \"currentSessionID\",\n      currentSessionID,\n      \"nodeConfirmedInSessionWithID\",\n      nodeConfirmedInSessionWithID\n    );\n    if (!isConfirmedInThisSession) {\n      classes.push(\"notconfirmed\");\n    }\n    return (\n      <Draggable\n        scale={scale}\n        position={position}\n        onDrag={onDrag}\n        handle=\"header\"\n        onMouseDown={e => {\n          e.stopPropagation();\n          console.log(\"node clicked\");\n          onSelectNode(nodeIndex);\n        }}\n      >\n        <div\n          className={classes.join(\" \")}\n          style={{\n            height: `${(inputPorts.length + outputPorts.length + 1) *\n              (rowHeight - 1)}px`,\n            width: `${width}px`\n          }}\n        >\n          <div className=\"main_area\">\n            <div className=\"addin noselect\">+</div>\n            <header className=\"nodetext noselect\">{title}</header>\n            <div className=\"addout noselect\">+</div>\n          </div>\n          {inputPorts.map((port, portIndex) => {\n            return (\n              <InPort\n                key={portIndex}\n                name={port.name}\n                nodeIndex={nodeIndex}\n                portIndex={portIndex}\n                onConnect={onConnect}\n              />\n            );\n          })}\n\n          {outputPorts.map((port, portIndex) => {\n            return (\n              <OutPort\n                key={portIndex}\n                name={port.name}\n                nodeIndex={nodeIndex}\n                portIndex={portIndex}\n              />\n            );\n          })}\n        </div>\n      </Draggable>\n    );\n  }\n}\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n// import { InlineMath } from \"react-katex\";\nimport BezierCurve from \"./BezierCurve\";\nimport {\n  positionNodeAction,\n  positionEveryOtherNodeAction,\n  positionTextNodeAction,\n  positionImgNodeAction,\n  connectPortsAction,\n  selectNodeAction,\n  selectConnectionAction,\n  selectClearAction,\n  createNodeAction\n} from \"../redux/actions\";\nimport HTMLNode from \"./HTMLNode\";\nimport {\n  InOutNode,\n  inPortRelativePosition,\n  outPortRelativePosition\n} from \"./InOutNode\";\n\nclass GraphicsAreaPureHTML extends React.Component {\n  render() {\n    return (\n      <div\n        className=\"nodearea bgpattern\"\n        onMouseDown={e => {\n          console.log(\"graphicsarea clicked\");\n          this.props.onSelectClear();\n        }}\n        onDragOver={e => {\n          e.preventDefault();\n        }}\n        onDrop={e => {\n          if (e.dataTransfer != null) {\n            var textData = e.dataTransfer.getData(\"text\");\n            console.log(\"textData\", textData);\n            if (textData != null && textData !== \"\") {\n              var payLoad = JSON.parse(textData);\n              console.log(\"dropped on nodearea\", e, e.clientX, e.clientY);\n              if (payLoad.type === \"CREATE_NODE\") {\n                var rect = e.target.getBoundingClientRect();\n                var x = (e.clientX - rect.left) / this.props.scale; //x position within the element.\n                var y = (e.clientY - rect.top) / this.props.scale; //y position within the element.\n\n                this.props.onCreateNode(\n                  x,\n                  y,\n                  payLoad.templateIndex,\n                  payLoad.title\n                );\n              }\n            }\n          }\n        }}\n      >\n        <div\n          className=\"graphicsarea\"\n          style={{ transform: \"scale(\" + this.props.scale + \")\" }}\n        >\n          <svg\n            className=\"arrowsvg\"\n            style={{ position: \"relative\", top: \"0px\", left: \"0px\" }}\n          >\n            {this.props.connections.map((key, index) => {\n              var fromNode = this.props.nodes[key.from.nodeIndex];\n              var toNode = this.props.nodes[key.to.nodeIndex];\n              var fromX =\n                fromNode.position.x +\n                outPortRelativePosition(fromNode, key.from.index).x;\n              var fromY =\n                fromNode.position.y +\n                outPortRelativePosition(fromNode, key.from.index).y;\n              var toX =\n                toNode.position.x +\n                inPortRelativePosition(toNode, key.to.index).x;\n              var toY =\n                toNode.position.y +\n                inPortRelativePosition(toNode, key.to.index).y;\n              return (\n                <BezierCurve\n                  key={index}\n                  isSelected={key.isSelected}\n                  connectionIndex={index}\n                  onSelectConnection={this.props.onSelectConnection}\n                  start={{ x: fromX, y: fromY }}\n                  end={{ x: toX, y: toY }}\n                  c1={{\n                    x: fromX + (fromNode.width * 3) / 4,\n                    y: fromY\n                  }}\n                  c2={{\n                    x: toX - (toNode.width * 3) / 4,\n                    y: toY\n                  }}\n                  curveColor=\"black\"\n                  curveWidth={3}\n                />\n              );\n            })}\n          </svg>\n\n          {this.props.nodes.map((key, index) =>\n            key.htmlNode ? (\n              <HTMLNode\n                title={key.title}\n                key={index}\n                scale={this.props.scale}\n                position={key.position}\n                onDrag={(e, position) => {\n                  this.props.onSetPosition(index, position, false);\n                }}\n              />\n            ) : (\n              <InOutNode\n                title={key.title}\n                key={index}\n                nodeIndex={index}\n                currentSessionID={this.props.currentSessionID}\n                nodeConfirmedInSessionWithID={key.nodeConfirmedInSessionWithID}\n                scale={this.props.scale}\n                position={key.position}\n                inputPorts={key.inputPorts}\n                outputPorts={key.outputPorts}\n                width={key.width}\n                isSelected={key.isSelected}\n                onDrag={(e, position) => {\n                  this.props.onSetPosition(\n                    index,\n                    position,\n                    this.props.stressTest\n                  );\n                }}\n                onConnect={this.props.onConnect}\n                onSelectNode={this.props.onSelectNode}\n              />\n            )\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  nodes: state.nodes,\n  connections: state.connections,\n  scale: state.scale,\n  currentSessionID: state.currentSessionID,\n  textNode: state.textNode,\n  imgNode: state.imgNode,\n  stressTest: state.stressTest\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onSetPosition: (index, position, stressTest) => {\n    if (stressTest) {\n      dispatch(positionEveryOtherNodeAction(index, position));\n    } else {\n      dispatch(positionNodeAction(index, position));\n    }\n  },\n  onSetTextNodePosition: position => dispatch(positionTextNodeAction(position)),\n  onSetImgNodePosition: position => dispatch(positionImgNodeAction(position)),\n  onConnect: (fromNodeIndex, fromPortIndex, toNodeIndex, toPortIndex) => {\n    console.log(\"onConnected\");\n    dispatch(\n      connectPortsAction(fromNodeIndex, fromPortIndex, toNodeIndex, toPortIndex)\n    );\n  },\n  onSelectNode: nodeIndex => dispatch(selectNodeAction(nodeIndex)),\n  onSelectConnection: connectionIndex =>\n    dispatch(selectConnectionAction(connectionIndex)),\n  onSelectClear: () => dispatch(selectClearAction()),\n  onCreateNode: (x, y, index, title) =>\n    dispatch(createNodeAction(x, y, index, title))\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(GraphicsAreaPureHTML);\n","import React from \"react\";\nimport $ from \"jquery\";\nwindow.jQuery = window.$ = $;\nrequire(\"jqueryui\");\nvar draw2d = require(\"draw2d\");\n\nexport default class CanvasDraw2D extends React.Component {\n  componentDidMount() {\n    this.renderCanvas(\"mycanvasdraw2d\");\n  }\n\n  renderCanvas(canvasId) {\n    var canvas = new draw2d.Canvas(canvasId);\n\n    // create and add two nodes which contains Ports (In and OUT)\n    //\n    var start = new draw2d.shape.node.Start();\n    var end = new draw2d.shape.node.End();\n\n    // ...add it to the canvas\n    canvas.add(start, 50, 50);\n    canvas.add(new draw2d.shape.node.Start(), 50, 250);\n    canvas.add(end, 230, 150);\n\n    // Create a Connection and connect the Start and End node\n    //\n    var c = new draw2d.Connection();\n    c.setRouter(new draw2d.layout.connection.SplineConnectionRouter());\n\n    // Set the endpoint decorations for the connection\n    //\n    c.setSourceDecorator(new draw2d.decoration.connection.BarDecorator());\n    c.setTargetDecorator(new draw2d.decoration.connection.DiamondDecorator());\n    // Connect the endpoints with the start and end port\n    //\n    c.setSource(start.getOutputPort(0));\n    c.setTarget(end.getInputPort(0));\n\n    // and finally add the connection to the canvas\n    canvas.add(c);\n\n    var figure = new draw2d.shape.analog.OpAmp();\n    canvas.add(figure, 350, 110);\n\n    var p1 = new draw2d.shape.basic.Polygon();\n    var p2 = new draw2d.shape.basic.Polygon();\n\n    canvas.add(p1, 450, 150);\n    canvas.add(p2, 450, 200);\n\n    p2.setBackgroundColor(\"#f0f000\");\n    p2.setAlpha(0.7);\n    p2.setDimension(100, 60);\n\n    canvas.setCurrentSelection(p2);\n\n    var shape = new draw2d.shape.basic.Text();\n\n    shape.setText(\"This is a simple text with some loooooong word in.\");\n    shape.setBackgroundColor(\"#f0f000\");\n\n    canvas.add(shape, 550, 10);\n\n    var lshape = new draw2d.shape.basic.Label();\n\n    lshape.setText(\"This is a label.\");\n    lshape.setBackgroundColor(\"#f0f000\");\n\n    canvas.add(lshape, 350, 70);\n\n    var pie = new draw2d.shape.diagram.Pie(80, 80);\n    pie.setWidth(100);\n    pie.setData([30, 60, 122, 4]);\n    canvas.add(pie, 600, 160);\n\n    var postit = new draw2d.shape.note.PostIt();\n    postit.installEditor(new draw2d.ui.LabelInplaceEditor());\n    postit.setColor(\"#000000\");\n    postit.setPadding(20);\n\n    postit.setText(\"This is simple sticky note\\nDouble click to edit.\");\n\n    canvas.add(postit, 700, 10);\n\n    var label = new draw2d.shape.basic.Label();\n\n    label.installEditor(new draw2d.ui.LabelInplaceEditor());\n    label.setText(\"Double click me to edit\");\n\n    canvas.add(label, 50, 10);\n\n    // Override the default connection type. This is used during drag&drop operations of ports.\n    //\n    draw2d.Connection.createConnection = function(sourcePort, targetPort) {\n      // return my special kind of connection\n      var con = new draw2d.Connection();\n      con.setRouter(new draw2d.layout.connection.FanConnectionRouter());\n      return con;\n    };\n\n    // create and add two nodes which contains Ports (In and OUT)\n    //\n    start = new draw2d.shape.node.Start();\n    end = new draw2d.shape.node.End();\n\n    // ...add it to the canvas\n    canvas.add(start, 50, 250);\n    canvas.add(end, 230, 280);\n\n    // first Connection\n    //\n    c = draw2d.Connection.createConnection();\n    c.setSource(start.getOutputPort(0));\n    c.setTarget(end.getInputPort(0));\n    canvas.add(c);\n\n    // second Connection\n    //\n    c = draw2d.Connection.createConnection();\n    c.setSource(start.getOutputPort(0));\n    c.setTarget(end.getInputPort(0));\n    canvas.add(c);\n\n    // third Connection\n    //\n    c = draw2d.Connection.createConnection();\n    c.setSource(start.getOutputPort(0));\n    c.setTarget(end.getInputPort(0));\n    canvas.add(c);\n\n    // fourth Connection\n    //\n    c = draw2d.Connection.createConnection();\n    c.setSource(start.getOutputPort(0));\n    c.setTarget(end.getInputPort(0));\n    canvas.add(c);\n\n    // Zoom mose wheel support\n    canvas.installEditPolicy(new draw2d.policy.canvas.WheelZoomPolicy());\n    shape = new draw2d.shape.basic.Text({\n      text: \"Use the mouse wheel + SHIFT to zoom\"\n    });\n\n    canvas.add(shape, 400, 300);\n\n    // Register some callbacks\n    canvas.on(\"select\", function(emitter, event) {\n      if (event.figure !== null) {\n        console.log(\"figure selected\");\n      } else {\n        console.log(\"selection cleared\");\n      }\n    });\n\n    $(\"#mycanvasdraw2d\").click(function(ev) {\n      console.log(\"Mouse click:\" + ev.clientX + \",\" + ev.clientY);\n    });\n\n    // Log state to console\n    var writer = new draw2d.io.json.Writer();\n    writer.marshal(canvas, json => console.log(json));\n\n    // Custom shape\n    {\n      class CustomFigure extends draw2d.SVGFigure {\n        constructor(attr) {\n          super(attr);\n\n          this.index = 0;\n          this.svgs = [];\n\n          this.svgs.push(\n            '<svg xmlns=\"http://www.w3.org/2000/svg\">' +\n              '  <path stroke=\"#000\" fill=\"#FFF\" stroke-miterlimit=\"4\" d=\"m0,49.842l0,-49.742l49.982,0l0,49.742l-49.982,0z\" id=\"polygon3873\"/>' +\n              '  <text text-anchor=\"middle\" fill=\"#000000\" font-family=\"Sans-serif\" x=\"24.81563\" y=\"26.50938\" xml:space=\"preserve\" font-size=\"8px\" id=\"svg_1\">Click me</text>' +\n              \"</svg>\"\n          );\n\n          this.svgs.push(\n            '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">' +\n              '<rect x=\"14\" y=\"23\" width=\"20\" height=\"20\" fill=\"lime\" stroke=\"black\" />' +\n              \"</svg>\"\n          );\n\n          this.on(\n            \"click\",\n            function() {\n              this.index = ++this.index % this.svgs.length;\n              this.setSVG(this.svgs[this.index], 500);\n            },\n            this\n          );\n        }\n\n        getSVG() {\n          return this.svgs[0];\n        }\n      }\n\n      var fig = new CustomFigure();\n\n      canvas.add(fig, 100, 100);\n    }\n  }\n\n  render() {\n    return <div id=\"mycanvasdraw2d\"></div>;\n  }\n}\n\nexport class GraphicsAreaDraw2D extends React.Component {\n  render() {\n    return (\n      <div className=\"graphicsarea\" style={{ transform: \"scale(1)\" }}>\n        <CanvasDraw2D className=\"canvas2darea\" />\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport DownloadLink from \"react-download-link\";\nimport \"rc-slider/assets/index.css\";\nimport \"rc-tooltip/assets/bootstrap.css\";\n\nimport Tooltip from \"rc-tooltip\";\nimport Slider from \"rc-slider\";\nimport { connect } from \"react-redux\";\n\nconst Handle = Slider.Handle;\n\nconst handle = props => {\n  const { value, dragging, index, ...restProps } = props;\n  return (\n    <Tooltip\n      prefixCls=\"rc-slider-tooltip\"\n      overlay={value}\n      visible={dragging}\n      placement=\"top\"\n      key={index}\n    >\n      <Handle value={value} {...restProps} />\n    </Tooltip>\n  );\n};\n\nconst TopBar = props => {\n  if (props.showControls) {\n    return (\n      <div className=\"topbar\">\n        <div className=\"zoom\">\n          <Slider\n            min={20}\n            max={150}\n            value={props.scale}\n            handle={handle}\n            onChange={props.onChange}\n          />\n        </div>\n        <DownloadLink\n          label=\"Save state to disk\"\n          className=\"savestate\"\n          tagName=\"h2\"\n          filename=\"state.txt\"\n          exportFile={() => JSON.stringify(props.state, null, 2)}\n        >\n          <h1>Save sta2te to disk</h1>\n        </DownloadLink>\n      </div>\n    );\n  } else {\n    return (\n      <div className=\"topbar\">\n        <DownloadLink\n          label=\"Save state to disk\"\n          className=\"savestate\"\n          tagName=\"h2\"\n          filename=\"state.txt\"\n          exportFile={() => JSON.stringify(props.state, null, 2)}\n        >\n          <h1>Save state to disk</h1>\n        </DownloadLink>\n      </div>\n    );\n  }\n};\n\nexport default connect()(TopBar);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { websocketClientSetup } from \"./websocketClientUtils\";\n\nimport \"./App.css\";\nimport \"./NodeList.css\";\nimport { NodeList } from \"./components/NodeList\";\n\nimport GraphicsAreaPureHTML from \"./components/GraphicsAreaPureHTML\";\nimport GraphicsAreaDraw2D from \"./components/CanvasDraw2D\";\n\nimport \"katex/dist/katex.min.css\";\n\nimport TopBar from \"./components/TopBar\";\nimport {\n  zoomAction,\n  deleteSelectedAction,\n  toggleGraphicsLibraryAction,\n  resetStateNormalAction,\n  resetStateStressTestAction,\n  loadDefaultNodeTemplatesAsyncAction,\n  loadOtherNodeTemplatesAsyncAction,\n  reconnectAction,\n  syncAction\n} from \"./redux/actions\";\n\nclass App extends React.Component {\n  componentDidMount() {\n    document.body.addEventListener(\"keydown\", e => {\n      console.log(\"key down \", e, this);\n      if (e.key === \"Backspace\" || e.key === \"Delete\") {\n        this.props.deleteSelected();\n      }\n    });\n\n    websocketClientSetup();\n  }\n\n  componentWillUnmount() {\n    //document.body.removeEventListener(\"keydown\", ???);\n  }\n\n  render() {\n    return (\n      <div className=\"App noselect\">\n        <div className=\"messagerow\">\n          {this.props.state.currentSessionID === \"\"\n            ? \"Server disconnected\"\n            : \"Server online\"}\n        </div>\n        <div\n          className=\"buttonrow\"\n          style={{ display: \"flex\", justifyContent: \"space-around\" }}\n        >\n          <button onClick={this.props.reconnect}>New session</button>\n          <button\n            onClick={() =>\n              this.props.sync(\n                this.props.state.currentSessionID,\n                this.props.state.nodes\n              )\n            }\n          >\n            Sync\n          </button>\n          <button onClick={this.props.resetStateNormal}>Some nodes</button>\n          <button onClick={this.props.resetStateStressTest}>Stress test</button>\n          <button onClick={this.props.toggleGraphicsLibrary}>\n            Pure HTML / Draw2D\n          </button>\n        </div>\n        <TopBar\n          className=\"topbar\"\n          showControls={this.props.state.pureHTMLgraph}\n          scale={this.props.state.scale * 100}\n          state={this.props.state}\n          onChange={this.props.onZoomChange}\n        />\n        <div className=\"editor\">\n          <div className=\"nodelist\">\n            <NodeList\n              templates={this.props.state.nodeTemplates}\n              onLoadDefault={this.props.onLoadDefault}\n              onLoadOther={this.props.onLoadOther}\n            />\n          </div>\n          {this.props.state.pureHTMLgraph ? (\n            <GraphicsAreaPureHTML />\n          ) : (\n            <GraphicsAreaDraw2D />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  state: state\n});\n\nconst mapDispatchToProps = dispatch => ({\n  deleteSelected: () => dispatch(deleteSelectedAction()),\n  onZoomChange: scale => dispatch(zoomAction(scale)),\n  toggleGraphicsLibrary: () => dispatch(toggleGraphicsLibraryAction()),\n  resetStateNormal: () => dispatch(resetStateNormalAction()),\n  resetStateStressTest: () => dispatch(resetStateStressTestAction()),\n  onLoadDefault: () => dispatch(loadDefaultNodeTemplatesAsyncAction()),\n  onLoadOther: () => dispatch(loadOtherNodeTemplatesAsyncAction()),\n  reconnect: () => dispatch(reconnectAction()),\n  sync: (currentSessionID, nodes) => {\n    dispatch(syncAction(currentSessionID, nodes));\n  }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { createStore, compose, applyMiddleware } from \"redux\";\nimport graphEditorReducer from \"./redux/reducers\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport thunk from \"redux-thunk\";\n\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nexport const store = createStore(\n  graphEditorReducer,\n  composeEnhancer(applyMiddleware(thunk))\n\n  // other store enhancers if any\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import InitialState from \"../../InitialState\";\nimport update from \"immutability-helper\";\nimport {\n  CHANGE_ZOOM,\n  DELETE_SELECTED,\n  SELECT_NODE,\n  SELECT_CONNECTION,\n  SELECT_CLEAR,\n  POSITION_NODE,\n  POSITION_EVERY_OTHER_NODE,\n  POSITION_TEXT_NODE,\n  POSITION_IMG_NODE,\n  TOGGLE_GRAPHICS,\n  RESET_NORMAL,\n  RESET_STRESS_TEST,\n  CONNECT_PORTS,\n  CREATE_NODE,\n  SET_NODE_TEMPLATE_LIST,\n  SET_CURRENT_SESSIONID,\n  CONFIRM_NODE,\n  RECONNECT_SERVER\n} from \"../actions\";\n\nfunction findNodeIndexWithId(state, id) {\n  var foundIndex = -1;\n  state.nodes.forEach((value, index) => {\n    if (value.id === id) {\n      foundIndex = index;\n    }\n  });\n  return foundIndex;\n}\n\nexport default function graphEditorReducer(\n  state = InitialState(false),\n  action\n) {\n  //  console.log(\"graphEditorReducer\", action);\n  var newState;\n  //  console.log(\"state before \", state);\n  var deltaX;\n  var deltaY;\n  var updateObject;\n  var oldSessionId;\n\n  switch (action.type) {\n    case CHANGE_ZOOM:\n      newState = update(state, { scale: { $set: action.percent / 100 } });\n      break;\n    case DELETE_SELECTED:\n      console.log(\"DELETE_SELECTED\");\n      newState = state;\n      // Delete all selected nodes and all selected connections.\n      // Remember to also delete all connections that goes from or to a deleted node.\n      // Also remember to update all indexes of connections to the new node indexes.\n      var i;\n      var connIdx;\n      var wasSomethingDeleted;\n      var wasConnectionDeleted;\n\n      // Delete selected nodes\n      wasSomethingDeleted = true;\n      while (wasSomethingDeleted) {\n        wasSomethingDeleted = false;\n        for (i = 0; i < newState.nodes.length; i++) {\n          if (newState.nodes[i].isSelected) {\n            // Delete at a specific index, no matter what value is in it\n            newState = update(newState, { nodes: { $splice: [[i, 1]] } });\n\n            // Remove connections to/from the deleted node\n            wasConnectionDeleted = true;\n            while (wasConnectionDeleted) {\n              wasConnectionDeleted = false;\n              for (\n                connIdx = 0;\n                connIdx < newState.connections.length;\n                connIdx++\n              ) {\n                if (\n                  newState.connections[connIdx].from.nodeIndex === i ||\n                  newState.connections[connIdx].to.nodeIndex === i\n                ) {\n                  newState = update(newState, {\n                    connections: { $splice: [[connIdx, 1]] }\n                  });\n                  wasConnectionDeleted = true;\n                  break;\n                }\n              }\n            }\n\n            // Decrement node indexes in connections by one if > i\n            updateObject = {};\n            // eslint-disable-next-line\n            newState.connections.map((value, index) => {\n              updateObject[index] = {\n                to: {\n                  nodeIndex: {\n                    $set:\n                      value.to.nodeIndex > i\n                        ? value.to.nodeIndex - 1\n                        : value.to.nodeIndex\n                  }\n                },\n                from: {\n                  nodeIndex: {\n                    $set:\n                      value.from.nodeIndex > i\n                        ? value.from.nodeIndex - 1\n                        : value.from.nodeIndex\n                  }\n                }\n              };\n              return null;\n            });\n            newState = update(newState, {\n              connections: {\n                ...updateObject\n              }\n            });\n\n            wasSomethingDeleted = true;\n            break;\n          }\n        }\n      }\n\n      // Delete selected connections\n      wasSomethingDeleted = true;\n      while (wasSomethingDeleted) {\n        wasSomethingDeleted = false;\n        for (i = 0; i < newState.connections.length; i++) {\n          if (newState.connections[i].isSelected) {\n            // Delete at a specific index, no matter what value is in it\n            newState = update(newState, { connections: { $splice: [[i, 1]] } });\n            wasSomethingDeleted = true;\n            break;\n          }\n        }\n      }\n      break;\n    case SELECT_NODE:\n      console.log(\"SELECT_NODE\", action.nodeIndex, state);\n      newState = update(state, {\n        nodes: {\n          [action.nodeIndex]: {\n            isSelected: { $set: true }\n          }\n        }\n      });\n      break;\n    case CREATE_NODE:\n      console.log(\"CREATE_NODE\", action.x, action.y, action);\n      newState = update(state, {\n        nodes: { $push: [state.nodeTemplates[action.index]] }\n      });\n      newState = update(newState, {\n        nodes: {\n          [newState.nodes.length - 1]: {\n            position: {\n              x: {\n                $set: action.x - state.nodeTemplates[action.index].width / 2\n              },\n              y: { $set: action.y - 10 }\n            },\n            id: { $set: action.nodeId }\n          }\n        }\n      });\n      console.log(\"state after \", newState);\n      break;\n    case CONFIRM_NODE:\n      console.log(\"CONFIRM_NODE\", action.nodeId, action.sessionId, action);\n      var nodeIndex = findNodeIndexWithId(state, action.nodeId);\n      console.log(\"nodeIndex\", nodeIndex);\n      newState = update(state, {\n        nodes: {\n          [nodeIndex]: {\n            nodeConfirmedInSessionWithID: { $set: action.sessionId }\n          }\n        }\n      });\n\n      break;\n    case SELECT_CONNECTION:\n      console.log(\"SELECT_CONNECTION\", action.connectionIndex);\n      newState = update(state, {\n        connections: {\n          [action.connectionIndex]: {\n            isSelected: { $set: true }\n          }\n        }\n      });\n      break;\n    case SELECT_CLEAR:\n      console.log(\"SELECT_CLEAR\");\n      updateObject = {};\n      state.nodes.map((value, index) => {\n        updateObject[index] = {\n          isSelected: { $set: false }\n        };\n        return null;\n      });\n      newState = update(state, {\n        nodes: {\n          ...updateObject\n        }\n      });\n\n      updateObject = {};\n      state.connections.map((value, index) => {\n        updateObject[index] = {\n          isSelected: { $set: false }\n        };\n        return null;\n      });\n      newState = update(newState, {\n        connections: {\n          ...updateObject\n        }\n      });\n      break;\n    case POSITION_NODE:\n      deltaX = action.position.x - state.nodes[action.index].position.x;\n      deltaY = action.position.y - state.nodes[action.index].position.y;\n      newState = update(state, {\n        nodes: {\n          [action.index]: {\n            position: {\n              x: { $set: action.position.x },\n              y: { $set: action.position.y }\n            }\n          }\n        }\n      });\n      break;\n    case POSITION_EVERY_OTHER_NODE:\n      deltaX = action.position.x - state.nodes[action.index].position.x;\n      deltaY = action.position.y - state.nodes[action.index].position.y;\n      updateObject = {};\n      state.nodes.map((value, index) => {\n        if (index % 2 === 0) {\n          updateObject[index] = {\n            position: {\n              x: { $set: state.nodes[index].position.x + deltaX },\n              y: { $set: state.nodes[index].position.y + deltaY }\n            }\n          };\n        }\n        return null;\n      });\n      newState = update(state, {\n        nodes: {\n          [action.index]: {\n            position: {\n              x: { $set: action.position.x },\n              y: { $set: action.position.y }\n            }\n          },\n          ...updateObject\n        }\n      });\n      break;\n    case POSITION_TEXT_NODE:\n      newState = update(state, {\n        textNode: {\n          x: { $set: action.position.x },\n          y: { $set: action.position.y }\n        }\n      });\n      break;\n    case POSITION_IMG_NODE:\n      newState = update(state, {\n        imgNode: {\n          x: { $set: action.position.x },\n          y: { $set: action.position.y }\n        }\n      });\n      break;\n    case TOGGLE_GRAPHICS:\n      var newValue = state.pureHTMLgraph ? false : true;\n      newState = update(state, {\n        pureHTMLgraph: { $set: newValue }\n      });\n      break;\n    case RESET_NORMAL:\n      oldSessionId = state.currentSessionID;\n      newState = InitialState(false);\n      newState = update(newState, {\n        currentSessionID: { $set: oldSessionId }\n      });\n      break;\n    case RESET_STRESS_TEST:\n      oldSessionId = state.currentSessionID;\n      newState = InitialState(true);\n      newState = update(newState, {\n        currentSessionID: { $set: oldSessionId }\n      });\n      break;\n    case CONNECT_PORTS:\n      console.log(\"CONNECT_PORTS reducer\");\n      newState = update(state, {\n        connections: {\n          $push: [\n            {\n              isSelected: false,\n              from: {\n                nodeIndex: action.fromNodeIndex,\n                index: action.fromPortIndex\n              },\n              to: {\n                nodeIndex: action.toNodeIndex,\n                index: action.toPortIndex\n              }\n            }\n          ]\n        }\n      });\n      break;\n    case SET_NODE_TEMPLATE_LIST:\n      console.log(\"SET_NODE_TEMPLATE_LIST\");\n      newState = update(state, {\n        nodeTemplates: { $set: action.data.nodeTemplates }\n      });\n      break;\n    case SET_CURRENT_SESSIONID:\n      console.log(\"SET_CURRENT_SESSIONID\", action);\n      newState = update(state, {\n        currentSessionID: { $set: action.id }\n      });\n      break;\n    case RECONNECT_SERVER:\n      // Connection was reset in action creator\n      newState = state;\n      break;\n    default:\n      console.log(\"default \", state);\n      newState = state;\n      break;\n  }\n\n  //  console.log(\"newState  \", newState);\n  return newState;\n}\n"],"sourceRoot":""}